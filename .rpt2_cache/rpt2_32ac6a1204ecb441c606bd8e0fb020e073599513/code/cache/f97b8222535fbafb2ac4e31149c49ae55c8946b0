{
  "code": "export class GameScene extends Laya.Scene {\r\n    createChildren() {\r\n        super.createChildren();\r\n        this.loadScene(\"GameScene\");\r\n    }\r\n    onAwake() {\r\n        this.btn_next.on(Laya.Event.CLICK, this, this.nextTurn);\r\n    }\r\n    init(ifChinese) {\r\n        this.grade = 1;\r\n        this.season = 1;\r\n        this.money = 0;\r\n        this.enegy = 7;\r\n        this.score = 0;\r\n        this.paper = 0;\r\n        this.finalpaperpercent = 0;\r\n        this.paperpercent = 0;\r\n        this.ifPass = false;\r\n        this.p_ifgoal1.visible = false;\r\n        this.p_ifgoal2.visible = false;\r\n        this.p_ifgoal3.visible = false;\r\n        this.p_ifgoal4.visible = false;\r\n        if (ifChinese) {\r\n            this.c_grade.skin = \"comp/grade_cn.png\";\r\n            this.c_season.skin = \"comp/season_cn.png\";\r\n        }\r\n        else {\r\n        }\r\n        this.updateUI();\r\n    }\r\n    nextTurn() {\r\n        this.season += 1;\r\n        if (this.season == 5) {\r\n            this.grade++;\r\n            this.season = 1;\r\n        }\r\n        if (this.grade == 9) {\r\n            alert(\"游戏结束！\");\r\n            this.endGame();\r\n        }\r\n        this.updateUI();\r\n    }\r\n    updateUI() {\r\n        this.c_grade.value = this.grade.toString();\r\n        this.c_season.value = this.season.toString();\r\n        this.l_score.text = this.score.toString();\r\n        this.l_paper.text = this.paper.toString();\r\n        this.l_fpp.text = this.finalpaperpercent.toString();\r\n        this.p_paperpercent.value = this.paperpercent;\r\n        if (this.checkWin()) {\r\n            alert(\"游戏胜利！\");\r\n            this.endGame();\r\n        }\r\n    }\r\n    checkWin() {\r\n        if (this.score >= 6) {\r\n            this.p_ifgoal1.visible = true;\r\n        }\r\n        if (this.paper >= 2) {\r\n            this.p_ifgoal2.visible = true;\r\n        }\r\n        if (this.finalpaperpercent >= 100) {\r\n            this.p_ifgoal3.visible = true;\r\n        }\r\n        if (this.ifPass) {\r\n            this.p_ifgoal4.visible = this.ifPass;\r\n        }\r\n        if (this.p_ifgoal1.visible && this.p_ifgoal2.visible && this.p_ifgoal3.visible && this.p_ifgoal4.visible) {\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n    endGame() {\r\n        Laya.stage.removeChild(this);\r\n    }\r\n}\r\n",
  "references": []
}
